<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Snake</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style>
        .cell{
            border: solid 1px black;
            width: 5em;
            height: 5em;
            padding: 1em;
        }
    </style>
</head>
<body>
<h1> The Best Snake Game in the World</h1>
<h2 id="test"></h2>
<h2 id="test2"></h2>
<h2 id="test3"></h2>
<table>
    <tr id="0">
        <td class="cell" id="00"></td>
        <td class="cell" id="01"></td>
        <td class="cell" id="02"></td>
        <td class="cell" id="03"></td>
        <td class="cell" id="04"></td>
        <td class="cell" id="05"></td>
        <td class="cell" id="06"></td>
        <td class="cell" id="07"></td>
        <td class="cell" id="08"></td>
        <td class="cell" id="09"></td>
    </tr>
    <tr id="1">
        <td class="cell" id="10"></td>
        <td class="cell" id="11"></td>
        <td class="cell" id="12"></td>
        <td class="cell" id="13"></td>
        <td class="cell" id="14"></td>
        <td class="cell" id="15"></td>
        <td class="cell" id="16"></td>
        <td class="cell" id="17"></td>
        <td class="cell" id="18"></td>
        <td class="cell" id="19"></td>
    </tr>
    <tr id="2">
        <td class="cell" id="20"></td>
        <td class="cell" id="21"></td>
        <td class="cell" id="22"></td>
        <td class="cell" id="23"></td>
        <td class="cell" id="24"></td>
        <td class="cell" id="25"></td>
        <td class="cell" id="26"></td>
        <td class="cell" id="27"></td>
        <td class="cell" id="28"></td>
        <td class="cell" id="29"></td>
    </tr>
    <tr id="3">
        <td class="cell" id="30"></td>
        <td class="cell" id="31"></td>
        <td class="cell" id="32"></td>
        <td class="cell" id="33"></td>
        <td class="cell" id="34"></td>
        <td class="cell" id="35"></td>
        <td class="cell" id="36"></td>
        <td class="cell" id="37"></td>
        <td class="cell" id="38"></td>
        <td class="cell" id="39"></td>
    </tr>
    <tr id="4">
        <td class="cell" id="40"></td>
        <td class="cell" id="41"></td>
        <td class="cell" id="42"></td>
        <td class="cell" id="43"></td>
        <td class="cell" id="44"></td>
        <td class="cell" id="45"></td>
        <td class="cell" id="46"></td>
        <td class="cell" id="47"></td>
        <td class="cell" id="48"></td>
        <td class="cell" id="49"></td>
    </tr>
    <tr id="5">
        <td class="cell" id="50"></td>
        <td class="cell" id="51"></td>
        <td class="cell" id="52"></td>
        <td class="cell" id="53"></td>
        <td class="cell" id="54"></td>
        <td class="cell" id="55"></td>
        <td class="cell" id="56"></td>
        <td class="cell" id="57"></td>
        <td class="cell" id="58"></td>
        <td class="cell" id="59"></td>
    </tr>
    <tr id="6">
        <td class="cell" id="60"></td>
        <td class="cell" id="61"></td>
        <td class="cell" id="62"></td>
        <td class="cell" id="63"></td>
        <td class="cell" id="64"></td>
        <td class="cell" id="65"></td>
        <td class="cell" id="66"></td>
        <td class="cell" id="67"></td>
        <td class="cell" id="68"></td>
        <td class="cell" id="69"></td>
    </tr>
    <tr id="7">
        <td class="cell" id="70"></td>
        <td class="cell" id="71"></td>
        <td class="cell" id="72"></td>
        <td class="cell" id="73"></td>
        <td class="cell" id="74"></td>
        <td class="cell" id="75"></td>
        <td class="cell" id="76"></td>
        <td class="cell" id="77"></td>
        <td class="cell" id="78"></td>
        <td class="cell" id="79"></td>
    </tr>
    <tr id="8">
        <td class="cell" id="80"></td>
        <td class="cell" id="81"></td>
        <td class="cell" id="82"></td>
        <td class="cell" id="83"></td>
        <td class="cell" id="84"></td>
        <td class="cell" id="85"></td>
        <td class="cell" id="86"></td>
        <td class="cell" id="87"></td>
        <td class="cell" id="88"></td>
        <td class="cell" id="89"></td>
    </tr>
    <tr id="9">
        <td class="cell" id="90"></td>
        <td class="cell" id="91"></td>
        <td class="cell" id="92"></td>
        <td class="cell" id="93"></td>
        <td class="cell" id="94"></td>
        <td class="cell" id="95"></td>
        <td class="cell" id="96"></td>
        <td class="cell" id="97"></td>
        <td class="cell" id="98"></td>
        <td class="cell" id="99"></td>
    </tr>
</table>
<script type="application/javascript">
    let x = Math.round(Math.random()*9);
    let y = Math.round(Math.random()*5);
    let current = ""+x+y;
    let positions = [current];
    let setWhite = [""];
    let game = 1;
    let length = 1;
    let direction = "right";
    let applePos = apple();

    document.getElementById("test").innerHTML = current;
    document.getElementById(current).style.backgroundColor = "Black";

    main();

    function main(){
        setInterval(function move() {
            switch (direction) {
                case "left":
                    if (y>0){
                        y = y - 1;
                    }else {
                        gameOver();
                    }
                    break;
                case "up":
                    if (x>0){
                        x = x - 1;
                    }else {
                        gameOver();
                    }
                    break;
                case "right":
                    if (y<9){
                        y = y + 1;
                    }else {
                        gameOver();
                    }
                    break;
                case "down":
                    if (x<9){
                        x = x + 1;
                    }else {
                        gameOver();
                    }

                    break;
            }
            output(x, y);
            tail(current);
            checkApple();
        }, 500);
    }

    document.addEventListener('keydown', function (event) {
        const code = event.code;
        switch (code) {
            case "KeyW":
                if (direction !== "down") {
                    direction = "up";
                }
                break;
            case "ArrowUp":
                if (direction !== "down") {
                    direction = "up";
                }
                break;
            case "KeyA":
                if (direction !== "right") {
                    direction = "left";
                }
                break;
            case "ArrowLeft":
                if (direction !== "right") {
                    direction = "left";
                }
                break;
            case "KeyS":
                if (direction !== "up") {
                    direction = "down";
                }
                break;
            case "ArrowDown":
                if (direction !== "up") {
                    direction = "down";
                }
                break;
            case "KeyD":
                if (direction !== "left") {
                    direction = "right";
                }
                break;
            case "ArrowRight":
                if (direction !== "left") {
                    direction = "right";
                }
                break;
            case "Space":
                game = 0;
                break;
        }
    });

    function output(x, y) {
        document.getElementById(current).style.backgroundColor = "White";
        current = "" + x + y;
        document.getElementById("test").innerHTML = current;
        document.getElementById(current).style.backgroundColor = "Black";
    }

    function apple(){
        let aX = Math.round(Math.random()*9);
        let aY = Math.round(Math.random()*9);
        let apple = ""+aX+aY;
        document.getElementById(apple).style.backgroundColor = "Green";
        return apple;
    }
    function checkApple(){
        if (applePos === current){
            length = length+1;
            increaseTail(current);
            applePos = apple();
        }
    }

    function tail(current){
        positions = positions.concat(positions.splice(0,1));
        document.getElementById(positions[0]).style.backgroundColor = "White";
        positions[0] = current;
        document.getElementById("test2").innerHTML = length;
        document.getElementById("test3").innerHTML = positions.toString();
        for (let i = 1; i<length; i++){
            document.getElementById(positions[i]).style.backgroundColor = "Gray";
        }

    }
    function increaseTail(current){
        let copy = positions;
        positions.forEach(function (element, index, array){
            positions[index+1] = copy[index];
        })
        positions[1] = current;
    }
    /*function checkTail(){
        for (let i in positions){
            if (positions[i] === current){
                gameOver();
            }
        }
    }*/

    function gameOver(){
        window.location.replace("gameOver.php?score="+length);
    }
</script>
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
</body>
